{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHelathCheck","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/auth/signin":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthCredentialsDTO"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/nfe":{"post":{"operationId":"InvoiceController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreateInvoiceDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceEntity"}}}}},"tags":["nfe"]}},"/nfe/{id}/xml":{"get":{"operationId":"InvoiceController_getInvoiceXml","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Retorna o XML da NF-e autorizada.","tags":["nfe"]}},"/nfe/{id}":{"get":{"operationId":"InvoiceController_getInvoice","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Retorna o detalhe da NF-e.","tags":["nfe"]}},"/nfe/webhook/retorno-sefaz":{"post":{"operationId":"InvoiceController_retornoSefaz","parameters":[],"requestBody":{"required":true,"description":"Payload enviado pela SEFAZ com o resultado da emissão","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookRetornoSefazDTO"}}}},"responses":{"200":{"description":"Callback processado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookRetornoSefazDTO"}}}},"400":{"description":"Payload inválido ou dados faltando"},"404":{"description":"NF-e não encontrada para o invoiceId informado"}},"summary":"Recebe retorno (simulado) da SEFAZ e atualiza status da NF-e","tags":["nfe"]}}},"info":{"title":"Nfe Service","description":"Nfe Service Api","version":"0.0.1","contact":{"name":"Vinícius G. Oliveira","url":"","email":"vinicius.oliver@gmail.com"}},"tags":[],"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"AuthCredentialsDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"ProductDTO":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"code":{"type":"string"},"price":{"type":"number"},"cfop":{"type":"string"},"cst":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","name","code","price","cfop","cst","createdAt","updatedAt"]},"InvoiceItemDTO":{"type":"object","properties":{"id":{"type":"string"},"invoiceId":{"type":"string"},"productId":{"type":"string"},"quantity":{"type":"number"},"total":{"type":"number"},"product":{"$ref":"#/components/schemas/ProductDTO"}},"required":["id","invoiceId","productId","quantity","total","product"]},"InvoiceCreateInvoiceDTO":{"type":"object","properties":{"id":{"type":"string"},"clientId":{"type":"string"},"userId":{"type":"number"},"items":{"type":"array","items":{"$ref":"#/components/schemas/InvoiceItemDTO"}}},"required":["id","clientId","userId","items"]},"InvoiceEntity":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"clientId":{"type":"string"},"userId":{"type":"number"},"xml":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"items":{"type":"array","items":{"type":"string"}}},"required":["id","status","clientId","userId","xml","createdAt","updatedAt","items"]},"WebhookRetornoSefazDTO":{"type":"object","properties":{"invoiceId":{"type":"string","example":"invoice-uuid-123","description":"ID da NF-e"},"status":{"type":"string","example":"AUTHORIZED","enum":["AUTHORIZED","REJECTED"],"description":"Status da NF-e"},"protocol":{"type":"string","example":"123456789","description":"Protocolo da autorização SEFAZ"},"xml":{"type":"string","example":"<xml>...</xml>","description":"XML da nota autorizada"},"message":{"type":"string","example":"Nota autorizada","description":"Mensagem adicional"}},"required":["invoiceId","status"]}}}}