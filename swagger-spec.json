{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHelathCheck","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/users":{"post":{"operationId":"UserController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["users"]},"get":{"operationId":"UserController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserEntity"}}}}}},"tags":["users"]}},"/users/{id}":{"get":{"operationId":"UserController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["users"]},"patch":{"operationId":"UserController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["users"]},"delete":{"operationId":"UserController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["users"]}},"/users/{id}/change-password":{"patch":{"operationId":"UserController_changePassword","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResetPasswordDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["users"]}},"/auth/signup":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateDTO"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/signin":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthCredentialsDTO"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRefreshTokenDTO"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/userinfo":{"get":{"operationId":"AuthController_getUserinfo","parameters":[],"responses":{"200":{"description":""}},"tags":["auth"]}},"/auth/logout":{"get":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":""}},"tags":["auth"]}},"/auth/confirmation/{token}":{"get":{"operationId":"AuthController_confirmationEmail","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["auth"]}},"/auth/send-recover-email":{"post":{"operationId":"AuthController_sendRecoverPasswordEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthSendRecoverEmailDTO"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/reset-password/{token}":{"patch":{"operationId":"AuthController_resetPassword","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResetPasswordDTO"}}}},"responses":{"200":{"description":""}},"tags":["auth"]}},"/nfe":{"post":{"operationId":"InvoiceController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreateInvoiceDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceEntity"}}}}},"tags":["nfe"]}},"/nfe/{id}/xml":{"get":{"operationId":"InvoiceController_getInvoiceXml","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Retorna o XML da NF-e autorizada.","tags":["nfe"]}},"/nfe/{id}":{"get":{"operationId":"InvoiceController_getInvoice","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Retorna o detalhe da NF-e.","tags":["nfe"]}},"/nfe/webhook/retorno-sefaz":{"post":{"operationId":"InvoiceController_retornoSefaz","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookRetornoSefazDTO"}}}},"responses":{"200":{"description":""}},"summary":"Recebe retorno (simulado) da SEFAZ e atualiza status da NF-e","tags":["nfe"]}},"/session-users":{"post":{"operationId":"SessionUserController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserEntity"}}}}},"tags":["session-users"]},"get":{"operationId":"SessionUserController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SessionUserEntity"}}}}}},"tags":["session-users"]}},"/session-users/{id}":{"get":{"operationId":"SessionUserController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserEntity"}}}}},"tags":["session-users"]},"patch":{"operationId":"SessionUserController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserEntity"}}}}},"tags":["session-users"]},"delete":{"operationId":"SessionUserController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionUserEntity"}}}}},"tags":["session-users"]}}},"info":{"title":"Nfe Service","description":"Nfe Service Api","version":"0.0.1","contact":{"name":"Vinícius G. Oliveira","url":"","email":"vinicius.oliver@gmail.com"}},"tags":[],"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"UserCreateDTO":{"type":"object","properties":{"email":{"type":"string"},"name":{"type":"string"},"password":{"type":"string"},"passwordConfirmation":{"type":"string"}},"required":["email","name","password","passwordConfirmation"]},"UserEntity":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"boolean"},"password":{"type":"string"},"salt":{"type":"string"},"confirmationToken":{"type":"string"},"recoverToken":{"type":"string"},"created_at":{"format":"date-time","type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["id","email","name","role","status","password","salt","confirmationToken","recoverToken","created_at","updated_at"]},"UserUpdateDTO":{"type":"object","properties":{"email":{"type":"string"},"name":{"type":"string"},"password":{"type":"string"},"passwordConfirmation":{"type":"string"}},"required":["email","name","password","passwordConfirmation"]},"AuthResetPasswordDTO":{"type":"object","properties":{"password":{"type":"string"},"passwordConfirmation":{"type":"string"}},"required":["password","passwordConfirmation"]},"AuthCredentialsDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"AuthRefreshTokenDTO":{"type":"object","properties":{}},"AuthSendRecoverEmailDTO":{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]},"ProductDTO":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"code":{"type":"string"},"price":{"type":"number"},"cfop":{"type":"string"},"cst":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","name","code","price","cfop","cst","createdAt","updatedAt"]},"InvoiceItemDTO":{"type":"object","properties":{"id":{"type":"string"},"invoiceId":{"type":"string"},"productId":{"type":"string"},"quantity":{"type":"number"},"total":{"type":"number"},"product":{"$ref":"#/components/schemas/ProductDTO"}},"required":["id","invoiceId","productId","quantity","total","product"]},"InvoiceCreateInvoiceDTO":{"type":"object","properties":{"id":{"type":"string"},"clientId":{"type":"string"},"userId":{"type":"number"},"items":{"type":"array","items":{"$ref":"#/components/schemas/InvoiceItemDTO"}}},"required":["id","clientId","userId","items"]},"InvoiceEntity":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"clientId":{"type":"string"},"userId":{"type":"number"},"xml":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"items":{"type":"array","items":{"type":"string"}}},"required":["id","status","clientId","userId","xml","createdAt","updatedAt","items"]},"WebhookRetornoSefazDTO":{"type":"object","properties":{"invoiceId":{"type":"string","example":"invoice-uuid-123","description":"ID da NF-e"},"status":{"type":"string","example":"AUTHORIZED","enum":["AUTHORIZED","REJECTED"],"description":"Status da NF-e"},"protocol":{"type":"string","example":"123456789","description":"Protocolo da autorização SEFAZ"},"xml":{"type":"string","example":"<xml>...</xml>","description":"XML da nota autorizada"},"message":{"type":"string","example":"Nota autorizada","description":"Mensagem adicional"}},"required":["invoiceId","status"]},"SessionUserDTO":{"type":"object","properties":{}},"SessionUserEntity":{"type":"object","properties":{"id":{"type":"number"},"guid":{"type":"string"},"user_id":{"type":"number"},"session_state":{"type":"string"},"from_ip":{"type":"string"},"created_at":{"format":"date-time","type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["id","guid","user_id","session_state","from_ip","created_at","updated_at"]}}}}